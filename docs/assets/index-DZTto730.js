(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();let i,d=0,w=null;function h(){return(w===null||w.byteLength===0)&&(w=new Uint8Array(i.memory.buffer)),w}const y=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},O=typeof y.encodeInto=="function"?function(t,e){return y.encodeInto(t,e)}:function(t,e){const n=y.encode(t);return e.set(n),{read:t.length,written:n.length}};function I(t,e,n){if(n===void 0){const a=y.encode(t),u=e(a.length,1)>>>0;return h().subarray(u,u+a.length).set(a),d=a.length,u}let r=t.length,o=e(r,1)>>>0;const c=h();let s=0;for(;s<r;s++){const a=t.charCodeAt(s);if(a>127)break;c[o+s]=a}if(s!==r){s!==0&&(t=t.slice(s)),o=n(o,r,r=s+t.length*3,1)>>>0;const a=h().subarray(o+s,o+r),u=O(t,a);s+=u.written,o=n(o,r,s,1)>>>0}return d=s,o}function S(t){return t==null}let f=null;function v(){return(f===null||f.buffer.detached===!0||f.buffer.detached===void 0&&f.buffer!==i.memory.buffer)&&(f=new DataView(i.memory.buffer)),f}const W=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&W.decode();function k(t,e){return t=t>>>0,W.decode(h().subarray(t,t+e))}function F(t){const e=i.__externref_table_alloc();return i.__wbindgen_export_0.set(e,t),e}function N(t,e){const n=e(t.length*4,4)>>>0;for(let r=0;r<t.length;r++){const o=F(t[r]);v().setUint32(n+4*r,o,!0)}return d=t.length,n}let b=null;function D(){return(b===null||b.byteLength===0)&&(b=new Uint16Array(i.memory.buffer)),b}function j(t,e){const n=e(t.length*2,2)>>>0;return D().set(t,n/2),d=t.length,n}function A(t){const e=i.__wbindgen_export_0.get(t);return i.__externref_table_dealloc(t),e}const M=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>i.__wbg_worldtokenizer_free(t>>>0,1));class ${__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,M.unregister(this),e}free(){const e=this.__destroy_into_raw();i.__wbg_worldtokenizer_free(e,0)}constructor(){const e=i.worldtokenizer_new();return this.__wbg_ptr=e>>>0,M.register(this,this.__wbg_ptr,this),this}encode(e){const n=I(e,i.__wbindgen_malloc,i.__wbindgen_realloc),r=d;return i.worldtokenizer_encode(this.__wbg_ptr,n,r)}encode_batch(e){const n=N(e,i.__wbindgen_malloc),r=d;return i.worldtokenizer_encode_batch(this.__wbg_ptr,n,r)}decode(e){let n,r;try{const o=j(e,i.__wbindgen_malloc),c=d,s=i.worldtokenizer_decode(this.__wbg_ptr,o,c);return n=s[0],r=s[1],k(s[0],s[1])}finally{i.__wbindgen_free(n,r,1)}}vocab_size(){return i.worldtokenizer_vocab_size(this.__wbg_ptr)>>>0}get_vocab_as_json(){const e=i.worldtokenizer_get_vocab_as_json(this.__wbg_ptr);if(e[2])throw A(e[1]);return A(e[0])}}async function P(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function V(){const t={};return t.wbg={},t.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},t.wbg.__wbg_new_9fee97a409b32b68=function(e){return new Uint16Array(e)},t.wbg.__wbg_newwithbyteoffsetandlength_d4a86622320ea258=function(e,n,r){return new Uint16Array(e,n>>>0,r>>>0)},t.wbg.__wbg_newwithlength_c4c419ef0bc8a1f8=function(e){return new Array(e>>>0)},t.wbg.__wbg_set_37837023f3d740e8=function(e,n,r){e[n>>>0]=r},t.wbg.__wbindgen_init_externref_table=function(){const e=i.__wbindgen_export_0,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg.__wbindgen_memory=function(){return i.memory},t.wbg.__wbindgen_string_get=function(e,n){const r=n,o=typeof r=="string"?r:void 0;var c=S(o)?0:I(o,i.__wbindgen_malloc,i.__wbindgen_realloc),s=d;v().setInt32(e+4*1,s,!0),v().setInt32(e+4*0,c,!0)},t.wbg.__wbindgen_string_new=function(e,n){return k(e,n)},t.wbg.__wbindgen_throw=function(e,n){throw new Error(k(e,n))},t}function H(t,e){return i=t.exports,U.__wbindgen_wasm_module=e,f=null,b=null,w=null,i.__wbindgen_start(),i}async function U(t){if(i!==void 0)return i;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL(""+new URL("rwkv_tokenizer_web_bg-2Hg9LBsx.wasm",import.meta.url).href,import.meta.url));const e=V();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await P(await t,e);return H(n,r)}let _=null;async function q(){await U(),_=new $}q();const C=50;let p=0;function J(){let t=0;do t=Math.floor(Math.random()*360);while(Math.abs(t-p)<C||Math.abs(t-p)>360-C);p=t;const e=Math.floor(Math.random()*20+80),n=Math.floor(Math.random()*10+80);return`hsl(${p}, ${e}%, ${n}%)`}window.encodeText=function(e){if(!_){console.error("Tokenizer is not initialized.");return}return _.encode(e)};window.decodeNumbers=function(e){if(!_){console.error("Tokenizer is not initialized.");return}return _.decode(e)};window.updateCharacterCount=function(e,n){const r=e.value.length;n.textContent=`(${r} characters)`};window.updateTokenCount=function(e,n){n.textContent=`(${e} tokens)`};window.updateAll=function(){const e=document.getElementById("inputText"),n=document.getElementById("outputText"),r=document.getElementById("inputLength"),o=document.getElementById("outputLength"),c=document.getElementById("output-text-btn"),s=document.getElementById("output-token-btn");let a={},u=!0;function m(){u?(s.classList.add("btn-active"),c.classList.remove("btn-active")):(c.classList.add("btn-active"),s.classList.remove("btn-active"))}function g(){if(_===null)return;const R=e.value,T=encodeText(R);if(u)n.innerHTML=T.join(", ");else{let x=[],E=[];T.forEach(B=>{let l="";E.push(B);try{l=decodeNumbers(E)}catch{return}if(E=[],a[l]||(a[l]=J()),l.search(/\n/)!==-1){let L="";l.split("").forEach(z=>{z===`
`?x.push("<br>"):L+=z}),l=L}x.push(`<span style="background-color: ${a[l]};">${l}</span>`)}),n.innerHTML=x.join("")}updateCharacterCount(e,r),updateTokenCount(T.length,o)}e.addEventListener("input",g),c.addEventListener("click",()=>{u=!1,m(),g()}),s.addEventListener("click",()=>{u=!0,m(),g()}),m(),g()};
