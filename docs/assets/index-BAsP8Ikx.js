(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();let i,f=0,h=null;function L(){return(h===null||h.byteLength===0)&&(h=new Uint8Array(i.memory.buffer)),h}const k=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},D=typeof k.encodeInto=="function"?function(t,e){return k.encodeInto(t,e)}:function(t,e){const n=k.encode(t);return e.set(n),{read:t.length,written:n.length}};function U(t,e,n){if(n===void 0){const u=k.encode(t),l=e(u.length,1)>>>0;return L().subarray(l,l+u.length).set(u),f=u.length,l}let r=t.length,o=e(r,1)>>>0;const c=L();let s=0;for(;s<r;s++){const u=t.charCodeAt(s);if(u>127)break;c[o+s]=u}if(s!==r){s!==0&&(t=t.slice(s)),o=n(o,r,r=s+t.length*3,1)>>>0;const u=L().subarray(o+s,o+r),l=D(t,u);s+=l.written,o=n(o,r,s,1)>>>0}return f=s,o}function $(t){return t==null}let w=null;function M(){return(w===null||w.buffer.detached===!0||w.buffer.detached===void 0&&w.buffer!==i.memory.buffer)&&(w=new DataView(i.memory.buffer)),w}const O=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&O.decode();function R(t,e){return t=t>>>0,O.decode(L().subarray(t,t+e))}function P(t){const e=i.__externref_table_alloc();return i.__wbindgen_export_0.set(e,t),e}function V(t,e){const n=e(t.length*4,4)>>>0;for(let r=0;r<t.length;r++){const o=P(t[r]);M().setUint32(n+4*r,o,!0)}return f=t.length,n}let p=null;function H(){return(p===null||p.byteLength===0)&&(p=new Uint16Array(i.memory.buffer)),p}function q(t,e){const n=e(t.length*2,2)>>>0;return H().set(t,n/2),f=t.length,n}function S(t){const e=i.__wbindgen_export_0.get(t);return i.__externref_table_dealloc(t),e}const W=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>i.__wbg_worldtokenizer_free(t>>>0,1));class J{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,W.unregister(this),e}free(){const e=this.__destroy_into_raw();i.__wbg_worldtokenizer_free(e,0)}constructor(){const e=i.worldtokenizer_new();return this.__wbg_ptr=e>>>0,W.register(this,this.__wbg_ptr,this),this}encode(e){const n=U(e,i.__wbindgen_malloc,i.__wbindgen_realloc),r=f;return i.worldtokenizer_encode(this.__wbg_ptr,n,r)}encode_batch(e){const n=V(e,i.__wbindgen_malloc),r=f;return i.worldtokenizer_encode_batch(this.__wbg_ptr,n,r)}decode(e){let n,r;try{const o=q(e,i.__wbindgen_malloc),c=f,s=i.worldtokenizer_decode(this.__wbg_ptr,o,c);return n=s[0],r=s[1],R(s[0],s[1])}finally{i.__wbindgen_free(n,r,1)}}vocab_size(){return i.worldtokenizer_vocab_size(this.__wbg_ptr)>>>0}get_vocab_as_json(){const e=i.worldtokenizer_get_vocab_as_json(this.__wbg_ptr);if(e[2])throw S(e[1]);return S(e[0])}}async function K(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function G(){const t={};return t.wbg={},t.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},t.wbg.__wbg_new_9fee97a409b32b68=function(e){return new Uint16Array(e)},t.wbg.__wbg_newwithbyteoffsetandlength_d4a86622320ea258=function(e,n,r){return new Uint16Array(e,n>>>0,r>>>0)},t.wbg.__wbg_newwithlength_c4c419ef0bc8a1f8=function(e){return new Array(e>>>0)},t.wbg.__wbg_set_37837023f3d740e8=function(e,n,r){e[n>>>0]=r},t.wbg.__wbindgen_init_externref_table=function(){const e=i.__wbindgen_export_0,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg.__wbindgen_memory=function(){return i.memory},t.wbg.__wbindgen_string_get=function(e,n){const r=n,o=typeof r=="string"?r:void 0;var c=$(o)?0:U(o,i.__wbindgen_malloc,i.__wbindgen_realloc),s=f;M().setInt32(e+4*1,s,!0),M().setInt32(e+4*0,c,!0)},t.wbg.__wbindgen_string_new=function(e,n){return R(e,n)},t.wbg.__wbindgen_throw=function(e,n){throw new Error(R(e,n))},t}function Q(t,e){return i=t.exports,F.__wbindgen_wasm_module=e,w=null,p=null,h=null,i.__wbindgen_start(),i}async function F(t){if(i!==void 0)return i;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL(""+new URL("rwkv_tokenizer_web_bg-2Hg9LBsx.wasm",import.meta.url).href,import.meta.url));const e=G();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await K(await t,e);return Q(n,r)}let g=null;async function X(){await F(),g=new J}X();const B=50;let E=0;function Y(){let t=0;do t=Math.floor(Math.random()*360);while(Math.abs(t-E)<B||Math.abs(t-E)>360-B);E=t;const e=Math.floor(Math.random()*20+80),n=Math.floor(Math.random()*10+80);return`hsl(${E}, ${e}%, ${n}%)`}window.encodeText=function(e){if(!g){console.error("Tokenizer is not initialized.");return}return g.encode(e)};window.decodeNumbers=function(e){if(!g){console.error("Tokenizer is not initialized.");return}return g.decode(e)};window.updateCharacterCount=function(e,n){const r=e.value.length;n.textContent=`(${r} characters)`};window.updateTokenCount=function(e,n){n.textContent=`(${e} tokens)`};window.updateAll=function(){const e=document.getElementById("inputText"),n=document.getElementById("outputText"),r=document.getElementById("inputLength"),o=document.getElementById("outputLength"),c=document.getElementById("output-text-btn"),s=document.getElementById("output-token-btn"),u=document.getElementById("rounded-colorbox"),l=N();let v={},y=!0,z=!0;function N(){let x;for(let _=0;_<document.styleSheets.length;_++){const b=document.styleSheets[_];try{if(b.cssRules)for(let a=0;a<b.cssRules.length;a++){const T=b.cssRules[a];if(T.selectorText===".rounded-colorbox"){x=T.style;break}}}catch(a){console.warn("Error accessing stylesheet rules:",a)}}return x}function A(){y?(s.classList.add("btn-active"),c.classList.remove("btn-active")):(c.classList.add("btn-active"),s.classList.remove("btn-active"))}function j(){z?l.borderRadius="0px":l.borderRadius="4px"}function m(){if(g===null)return;const x=e.value,_=encodeText(x);if(y)n.innerHTML=_.join(", ");else{let b=[],a=[];_.forEach(T=>{let d="";a.push(T);try{d=decodeNumbers(a)}catch{return}if(a=[],d.search(/\n/)!==-1){let C="";d.split("").forEach(I=>{I===`
`?b.push("<br>"):C+=I}),d=C}v[d]||(v[d]=Y()),b.push(`<span class="rounded-colorbox" style="background-color: ${v[d]};">${d}</span>`)}),n.innerHTML=b.join("")}updateCharacterCount(e,r),updateTokenCount(_.length,o)}e.addEventListener("input",m),c.addEventListener("click",()=>{y=!1,A(),m()}),s.addEventListener("click",()=>{y=!0,A(),m()}),u.addEventListener("click",()=>{j(),z=!z}),A(),m()};
