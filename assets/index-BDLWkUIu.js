(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();let i,a=0,l=null;function w(){return(l===null||l.byteLength===0)&&(l=new Uint8Array(i.memory.buffer)),l}const b=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},A=typeof b.encodeInto=="function"?function(t,e){return b.encodeInto(t,e)}:function(t,e){const n=b.encode(t);return e.set(n),{read:t.length,written:n.length}};function T(t,e,n){if(n===void 0){const f=b.encode(t),_=e(f.length,1)>>>0;return w().subarray(_,_+f.length).set(f),a=f.length,_}let r=t.length,o=e(r,1)>>>0;const c=w();let s=0;for(;s<r;s++){const f=t.charCodeAt(s);if(f>127)break;c[o+s]=f}if(s!==r){s!==0&&(t=t.slice(s)),o=n(o,r,r=s+t.length*3,1)>>>0;const f=w().subarray(o+s,o+r),_=A(t,f);s+=_.written,o=n(o,r,s,1)>>>0}return a=s,o}function v(t){return t==null}let u=null;function g(){return(u===null||u.buffer.detached===!0||u.buffer.detached===void 0&&u.buffer!==i.memory.buffer)&&(u=new DataView(i.memory.buffer)),u}const x=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&x.decode();function y(t,e){return t=t>>>0,x.decode(w().subarray(t,t+e))}function k(t){const e=i.__externref_table_alloc();return i.__wbindgen_export_0.set(e,t),e}function W(t,e){const n=e(t.length*4,4)>>>0;for(let r=0;r<t.length;r++){const o=k(t[r]);g().setUint32(n+4*r,o,!0)}return a=t.length,n}let d=null;function E(){return(d===null||d.byteLength===0)&&(d=new Uint16Array(i.memory.buffer)),d}function L(t,e){const n=e(t.length*2,2)>>>0;return E().set(t,n/2),a=t.length,n}function h(t){const e=i.__wbindgen_export_0.get(t);return i.__externref_table_dealloc(t),e}const m=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>i.__wbg_worldtokenizer_free(t>>>0,1));class O{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,m.unregister(this),e}free(){const e=this.__destroy_into_raw();i.__wbg_worldtokenizer_free(e,0)}constructor(){const e=i.worldtokenizer_new();return this.__wbg_ptr=e>>>0,m.register(this,this.__wbg_ptr,this),this}encode(e){const n=T(e,i.__wbindgen_malloc,i.__wbindgen_realloc),r=a;return i.worldtokenizer_encode(this.__wbg_ptr,n,r)}encode_batch(e){const n=W(e,i.__wbindgen_malloc),r=a;return i.worldtokenizer_encode_batch(this.__wbg_ptr,n,r)}decode(e){let n,r;try{const o=L(e,i.__wbindgen_malloc),c=a,s=i.worldtokenizer_decode(this.__wbg_ptr,o,c);return n=s[0],r=s[1],y(s[0],s[1])}finally{i.__wbindgen_free(n,r,1)}}vocab_size(){return i.worldtokenizer_vocab_size(this.__wbg_ptr)>>>0}get_vocab_as_json(){const e=i.worldtokenizer_get_vocab_as_json(this.__wbg_ptr);if(e[2])throw h(e[1]);return h(e[0])}}async function U(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function C(){const t={};return t.wbg={},t.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},t.wbg.__wbg_new_9fee97a409b32b68=function(e){return new Uint16Array(e)},t.wbg.__wbg_newwithbyteoffsetandlength_d4a86622320ea258=function(e,n,r){return new Uint16Array(e,n>>>0,r>>>0)},t.wbg.__wbg_newwithlength_c4c419ef0bc8a1f8=function(e){return new Array(e>>>0)},t.wbg.__wbg_set_37837023f3d740e8=function(e,n,r){e[n>>>0]=r},t.wbg.__wbindgen_init_externref_table=function(){const e=i.__wbindgen_export_0,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg.__wbindgen_memory=function(){return i.memory},t.wbg.__wbindgen_string_get=function(e,n){const r=n,o=typeof r=="string"?r:void 0;var c=v(o)?0:T(o,i.__wbindgen_malloc,i.__wbindgen_realloc),s=a;g().setInt32(e+4*1,s,!0),g().setInt32(e+4*0,c,!0)},t.wbg.__wbindgen_string_new=function(e,n){return y(e,n)},t.wbg.__wbindgen_throw=function(e,n){throw new Error(y(e,n))},t}function M(t,e){return i=t.exports,z.__wbindgen_wasm_module=e,u=null,d=null,l=null,i.__wbindgen_start(),i}async function z(t){if(i!==void 0)return i;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/rwkv-tokenizer-wasm/assets/rwkv_tokenizer_web_bg-2Hg9LBsx.wasm",import.meta.url));const e=C();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await U(await t,e);return M(n,r)}let p=null;async function R(){await z(),p=new O}R();window.reverseString=function(e){return e.split("").reverse().join("")};window.encodeText=function(e){if(!p){console.error("Tokenizer is not initialized.");return}return p.encode(e)};window.updateCharacterCount=function(e,n){const r=e.value.length;n.textContent=`(${r} characters)`};window.updateTokenCount=function(e,n){const r=e.value.split(",").length;n.textContent=`(${r} tokens)`};
